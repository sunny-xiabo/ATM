{
  "test_cases": [
    {
      "id": "TC-仅集团用户可执行一键退回操作-001",
      "title": "仅集团用户可执行一键退回操作 - 验证非集团超管用户无法执行一键退回操作",
      "preconditions": [
        "系统已登录普通用户账号（非集团超管）",
        "审批流程处于已审批通过状态（状态码：APPROVED）",
        "用户拥有除一键退回外的其他操作权限"
      ],
      "steps": [
        "导航至审批流程详情页面",
        "检查页面是否显示一键退回按钮",
        "尝试通过URL直接访问一键退回API端点：POST /api/approval/{processId}/return",
        "检查系统审计日志记录"
      ],
      "expected_results": [
        "页面不显示一键退回按钮",
        "API调用返回403 Forbidden错误，错误信息：\"权限不足，仅集团超管可执行此操作\"",
        "系统记录安全审计日志，包含：操作时间、用户ID、操作类型（RETURN_ATTEMPT）、结果（FAILED）、IP地址",
        "审计日志中敏感信息已脱敏处理"
      ],
      "priority": "P0",
      "category": "安全测试"
    },
    {
      "id": "TC-仅集团用户可执行一键退回操作-002",
      "title": "仅集团用户可执行一键退回操作 - 验证集团超管用户可正常执行一键退回操作",
      "preconditions": [
        "系统已登录集团超管账号（用户类型：GROUP_SUPER_ADMIN）",
        "审批流程处于审批通过状态（状态码：APPROVED）",
        "流程包含至少3条历史审批意见数据"
      ],
      "steps": [
        "导航至审批流程详情页面",
        "点击一键退回按钮",
        "在确认对话框中点击\"确定\"按钮",
        "验证流程状态从APPROVED变为DRAFT",
        "检查审批意见表数据是否被清空",
        "验证审计日志记录"
      ],
      "expected_results": [
        "页面正确显示一键退回按钮",
        "系统清空所有历史审批意见（SELECT COUNT(*) FROM approval_comments WHERE process_id = {processId} 返回0）",
        "流程状态正确从APPROVED退回至DRAFT状态",
        "生成退回操作审计记录，包含：操作者ID、流程ID、操作时间、原状态、新状态",
        "填报人收到退回通知（验证通知内容和接收人）"
      ],
      "priority": "P0",
      "category": "功能测试"
    },
    {
      "id": "TC-仅集团用户可执行一键退回操作-003",
      "title": "仅集团用户可执行一键退回操作 - 验证一键退回操作的数据完整性",
      "preconditions": [
        "系统已登录集团超管账号",
        "审批流程包含10条多级审批意见",
        "流程关联业务数据已生成（包括附件、关联业务记录等）"
      ],
      "steps": [
        "执行一键退回操作",
        "验证业务核心数据完整性：SELECT * FROM business_data WHERE process_id = {processId}",
        "检查审批意见表：SELECT COUNT(*) FROM approval_comments WHERE process_id = {processId}",
        "验证附件数据完整性：SELECT COUNT(*) FROM attachments WHERE process_id = {processId}",
        "确认流程可重新提交审批"
      ],
      "expected_results": [
        "核心业务数据保持完整未受影响（所有业务数据记录存在且未修改）",
        "仅审批意见数据被正确清空（审批意见表记录数为0）",
        "附件和其他关联数据保持完整",
        "流程可正常重新提交并启动审批",
        "数据库事务完整性得到保证"
      ],
      "priority": "P0",
      "category": "功能测试"
    },
    {
      "id": "TC-仅集团用户可执行一键退回操作-004",
      "title": "仅集团用户可执行一键退回操作 - 验证一键退回完整业务流程",
      "preconditions": [
        "系统已登录集团超管账号",
        "审批流程已完成审批（状态：APPROVED）",
        "具备重新提交审批的权限"
      ],
      "steps": [
        "执行一键退回操作",
        "验证流程状态变为DRAFT",
        "重新填写并提交审批申请",
        "启动新一轮审批流程",
        "完成全部审批环节",
        "验证最终审批状态"
      ],
      "expected_results": [
        "退回后流程状态正确重置为DRAFT",
        "重新提交审批流程正常启动（状态变为PENDING_REVIEW）",
        "新一轮审批可顺利完成（最终状态变为APPROVED）",
        "系统各环节状态转换正确",
        "业务数据在整个流程中保持一致性"
      ],
      "priority": "P1",
      "category": "功能测试"
    },
    {
      "id": "TC-仅集团用户可执行一键退回操作-005",
      "title": "仅集团用户可执行一键退回操作 - 验证界面按钮显示条件",
      "preconditions": [
        "使用集团超管和普通用户账号登录",
        "流程处于不同状态（DRAFT、PENDING_REVIEW、APPROVED、REJECTED）"
      ],
      "steps": [
        "使用集团超管查看不同状态流程详情页面",
        "使用普通用户查看相同流程详情页面",
        "验证一键退回按钮显示逻辑",
        "检查界面元素状态和样式"
      ],
      "expected_results": [
        "仅集团超管在APPROVED状态看到退回按钮",
        "其他状态（DRAFT、PENDING_REVIEW、REJECTED）不显示退回按钮",
        "普通用户在所有状态下均不显示退回按钮",
        "界面元素状态与权限和流程状态精确匹配",
        "用户体验符合预期设计"
      ],
      "priority": "P1",
      "category": "功能测试"
    },
    {
      "id": "TC-仅集团用户可执行一键退回操作-006",
      "title": "仅集团用户可执行一键退回操作 - 验证一键退回操作性能",
      "preconditions": [
        "系统负载正常（CPU<60%，内存<70%）",
        "准备包含1000条审批意见的测试数据",
        "性能监控工具（如APM）已就绪"
      ],
      "steps": [
        "执行一键退回操作",
        "记录操作响应时间（从点击到完成）",
        "监控系统CPU、内存、数据库连接数",
        "执行5次并发退回操作",
        "验证系统恢复时间"
      ],
      "expected_results": [
        "单次操作响应时间小于2秒（95百分位）",
        "系统资源使用在正常范围内（CPU峰值<85%，内存峰值<80%）",
        "并发操作时性能表现稳定，无超时或错误",
        "无内存泄漏或性能退化现象",
        "数据库连接池使用正常，无连接泄漏"
      ],
      "priority": "P2",
      "category": "性能测试"
    },
    {
      "id": "TC-仅集团用户可执行一键退回操作-007",
      "title": "仅集团用户可执行一键退回操作 - 验证退回通知机制",
      "preconditions": [
        "系统已登录集团超管账号",
        "审批流程处于APPROVED状态",
        "填报人邮箱和手机号已配置",
        "消息队列服务正常运行"
      ],
      "steps": [
        "执行一键退回操作",
        "检查消息队列中通知消息",
        "验证填报人邮箱收到的退回通知邮件",
        "验证填报人手机收到的短信通知",
        "检查通知内容准确性"
      ],
      "expected_results": [
        "系统生成退回通知消息并加入消息队列",
        "填报人收到邮件通知，包含：流程编号、退回原因、操作时间、操作人",
        "填报人收到短信通知，包含关键信息摘要",
        "通知内容准确无误，无敏感信息泄露",
        "通知时间戳与操作时间一致"
      ],
      "priority": "P1",
      "category": "功能测试"
    },
    {
      "id": "TC-仅集团用户可执行一键退回操作-008",
      "title": "仅集团用户可执行一键退回操作 - 验证多语言环境支持",
      "preconditions": [
        "系统语言设置为英文（en-US）",
        "已登录集团超管账号",
        "流程处于APPROVED状态"
      ],
      "steps": [
        "查看审批流程详情页面",
        "验证一键退回按钮文本翻译",
        "执行退回操作，验证确认对话框文本",
        "验证成功/错误消息的英文翻译",
        "切换至中文环境重复验证"
      ],
      "expected_results": [
        "一键退回按钮显示英文文本\"One-Click Return\"",
        "确认对话框显示英文提示\"Are you sure to return this process?\"",
        "操作成功消息显示英文\"Return operation completed successfully\"",
        "权限错误消息显示英文\"Permission denied: Only group super admin can perform this operation\"",
        "中英文环境下文本显示正确且一致"
      ],
      "priority": "P2",
      "category": "国际化测试"
    },
    {
      "id": "TC-仅集团用户可执行一键退回操作-009",
      "title": "仅集团用户可执行一键退回操作 - 验证审计日志详细内容",
      "preconditions": [
        "系统已登录集团超管账号",
        "流程处于APPROVED状态",
        "审计日志功能启用"
      ],
      "steps": [
        "执行一键退回操作",
        "查询审计日志表：SELECT * FROM audit_log WHERE operation_type = 'PROCESS_RETURN'",
        "验证日志字段完整性",
        "检查敏感信息脱敏情况"
      ],
      "expected_results": [
        "审计日志包含完整字段：log_id, user_id, user_type, operation_type, process_id, old_status, new_status, operation_time, ip_address, result",
        "用户敏感信息已脱敏（如身份证号、手机号部分隐藏）",
        "操作结果字段记录为SUCCESS",
        "时间戳格式正确且与时区一致",
        "日志记录不可篡改"
      ],
      "priority": "P1",
      "category": "安全测试"
    },
    {
      "id": "TC-仅集团用户可执行一键退回操作-010",
      "title": "仅集团用户可执行一键退回操作 - 验证API调用完整示例",
      "preconditions": [
        "获取有效的集团超管访问令牌",
        "流程处于APPROVED状态",
        "API测试工具（如Postman）就绪"
      ],
      "steps": [
        "构造API请求：POST /api/approval/{processId}/return",
        "设置请求头：Authorization: Bearer {access_token}, Content-Type: application/json",
        "设置请求体：{\"reason\": \"测试退回原因\"}",
        "执行API调用",
        "验证响应结果"
      ],
      "expected_results": [
        "API调用返回200状态码",
        "响应体包含：{\"success\": true, \"message\": \"退回操作成功\", \"new_status\": \"DRAFT\"}",
        "请求头认证信息正确验证",
        "操作原因被正确记录到审计日志",
        "流程状态正确更新"
      ],
      "priority": "P1",
      "category": "API测试"
    },
    {
      "id": "TC-仅集团用户可执行一键退回操作-011",
      "title": "仅集团用户可执行一键退回操作 - 验证极端数据量性能",
      "preconditions": [
        "准备包含100000条审批意见的测试流程",
        "性能监控工具就绪",
        "系统资源充足"
      ],
      "steps": [
        "执行一键退回操作",
        "监控操作执行时间",
        "检查数据库删除操作性能",
        "验证事务提交时间",
        "检查系统稳定性"
      ],
      "expected_results": [
        "操作在30秒内完成（大数据量特殊容忍）",
        "数据库删除操作效率正常（每秒处理>5000条）",
        "事务提交成功，无超时错误",
        "系统保持稳定，无OOM或崩溃",
        "审计日志正确记录大数据量操作"
      ],
      "priority": "P2",
      "category": "性能测试"
    },
    {
      "id": "TC-仅集团用户可执行一键退回操作-012",
      "title": "仅集团用户可执行一键退回操作 - 验证跨日时间边界",
      "preconditions": [
        "系统时间设置为23:59:50",
        "流程处于APPROVED状态",
        "已登录集团超管账号"
      ],
      "steps": [
        "在23:59:55执行一键退回操作",
        "验证操作完成时间",
        "检查业务日期记录",
        "验证审计日志时间戳"
      ],
      "expected_results": [
        "操作正确处理跨日时间边界",
        "业务日期记录为操作开始日期",
        "审计日志时间戳准确记录实际操作时间",
        "无日期计算错误或时区问题",
        "每日统计报表数据正确"
      ],
      "priority": "P2",
      "category": "边界测试"
    },
    {
      "id": "TC-仅集团用户可执行一键退回操作-013",
      "title": "仅集团用户可执行一键退回操作 - 验证并发冲突处理",
      "preconditions": [
        "两个集团超管同时登录系统",
        "同一流程处于APPROVED状态",
        "并发测试工具就绪"
      ],
      "steps": [
        "两个用户同时执行一键退回操作",
        "监控数据库锁机制",
        "验证操作结果",
        "检查数据一致性"
      ],
      "expected_results": [
        "数据库行锁正确生效，防止并发修改",
        "只有一个操作成功执行",
        "另一个操作返回适当的冲突错误（409 Conflict）",
        "数据保持一致性，无脏数据",
        "审计日志记录并发冲突事件"
      ],
      "priority": "P1",
      "category": "并发测试"
    },
    {
      "id": "TC-仅集团用户可执行一键退回操作-014",
      "title": "仅集团用户可执行一键退回操作 - 验证网络异常场景",
      "preconditions": [
        "网络模拟工具配置就绪",
        "流程处于APPROVED状态",
        "已登录集团超管账号"
      ],
      "steps": [
        "在执行退回操作过程中模拟网络中断",
        "验证事务回滚机制",
        "检查数据一致性",
        "验证错误处理和用户提示"
      ],
      "expected_results": [
        "事务正确回滚，无部分提交数据",
        "数据库状态保持一致性",
        "用户收到适当的网络错误提示",
        "审计日志记录操作失败及原因",
        "系统稳定性不受影响"
      ],
      "priority": "P2",
      "category": "异常测试"
    },
    {
      "id": "TC-仅集团用户可执行一键退回操作-015",
      "title": "仅集团用户可执行一键退回操作 - 验证数据库异常场景",
      "preconditions": [
        "数据库监控工具就绪",
        "流程处于APPROVED状态",
        "已登录集团超管账号"
      ],
      "steps": [
        "模拟数据库连接超时",
        "执行一键退回操作",
        "验证错误处理机制",
        "检查系统日志记录"
      ],
      "expected_results": [
        "系统正确处理数据库异常，返回适当的错误信息",
        "无系统崩溃或未处理异常",
        "用户收到友好的错误提示",
        "系统日志记录详细的异常信息",
        "事务完整性得到保证"
      ],
      "priority": "P2",
      "category": "异常测试"
    },
    {
      "id": "TC-仅集团用户可执行一键退回操作-016",
      "title": "仅集团用户可执行一键退回操作 - 验证权限动态变更场景",
      "preconditions": [
        "已登录集团超管账号",
        "流程处于APPROVED状态",
        "权限管理系统就绪"
      ],
      "steps": [
        "开始执行一键退回操作",
        "在操作过程中撤销当前用户的集团超管权限",
        "验证操作结果和处理机制",
        "检查权限验证逻辑"
      ],
      "expected_results": [
        "操作过程中权限变更被正确检测",
        "操作失败并返回权限不足错误",
        "事务正确回滚，无部分执行",
        "审计日志记录权限变更导致的失败",
        "系统安全性得到保障"
      ],
      "priority": "P1",
      "category": "安全测试"
    },
    {
      "id": "TC-仅集团用户可执行一键退回操作-007",
      "title": "仅集团用户可执行一键退回操作 - 验证跨浏览器兼容性",
      "preconditions": [
        "准备Chrome、Firefox、Safari、Edge浏览器",
        "集团超管账号可用",
        "流程处于可退回状态"
      ],
      "steps": [
        "在不同浏览器中登录系统",
        "执行一键退回操作",
        "验证界面显示一致性",
        "检查功能操作结果"
      ],
      "expected_results": [
        "所有浏览器界面显示一致",
        "功能操作结果相同",
        "无浏览器特定错误",
        "用户体验跨平台一致"
      ],
      "priority": "P3",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-一键退回按钮在状态=审批通过且当前用户=超管时显示-001",
      "title": "一键退回按钮在状态=审批通过且当前用户=超管时显示 - 验证集团超管在审批通过状态下可见一键退回按钮",
      "preconditions": [
        "系统已登录集团超管账户",
        "存在状态为'审批通过'的业务单据",
        "当前页面显示该业务单据详情"
      ],
      "steps": [
        "导航至审批通过状态的业务单据详情页面",
        "检查页面UI元素",
        "确认一键退回按钮是否显示"
      ],
      "expected_results": [
        "一键退回按钮在页面中清晰可见",
        "按钮状态为可点击状态",
        "按钮位置和样式符合UI设计规范"
      ],
      "priority": "P1",
      "category": "界面测试",
      "description": ""
    },
    {
      "id": "TC-一键退回按钮在状态=审批通过且当前用户=超管时显示-002",
      "title": "一键退回按钮在状态=审批通过且当前用户=超管时显示 - 验证非超管用户在审批通过状态下不可见一键退回按钮",
      "preconditions": [
        "系统已登录普通用户账户",
        "存在状态为'审批通过'的业务单据",
        "当前页面显示该业务单据详情"
      ],
      "steps": [
        "导航至审批通过状态的业务单据详情页面",
        "检查页面UI元素",
        "确认一键退回按钮是否显示"
      ],
      "expected_results": [
        "一键退回按钮在页面中不可见",
        "页面无任何退回相关操作入口",
        "用户无法通过任何方式触发退回操作"
      ],
      "priority": "P0",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-一键退回按钮在状态=审批通过且当前用户=超管时显示-003",
      "title": "一键退回按钮在状态=审批通过且当前用户=超管时显示 - 验证超管在非审批通过状态下不可见一键退回按钮",
      "preconditions": [
        "系统已登录集团超管账户",
        "存在状态不为'审批通过'的业务单据（如审批中、已驳回等）",
        "当前页面显示该业务单据详情"
      ],
      "steps": [
        "导航至非审批通过状态的业务单据详情页面",
        "检查页面UI元素",
        "确认一键退回按钮是否显示"
      ],
      "expected_results": [
        "一键退回按钮在页面中不可见",
        "页面显示与当前状态相符的正确操作按钮",
        "无任何退回相关操作入口显示"
      ],
      "priority": "P1",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-一键退回按钮在状态=审批通过且当前用户=超管时显示-004",
      "title": "一键退回按钮在状态=审批通过且当前用户=超管时显示 - 验证权限绕过漏洞-直接API调用退回操作",
      "preconditions": [
        "系统已登录普通用户账户",
        "存在状态为'审批通过'的业务单据",
        "获取一键退回操作的API端点信息"
      ],
      "steps": [
        "使用普通用户权限直接调用一键退回API",
        "尝试执行退回操作",
        "检查API响应结果"
      ],
      "expected_results": [
        "API返回权限不足错误（如403 Forbidden）",
        "业务单据状态保持为'审批通过'不变",
        "系统记录非法操作尝试日志"
      ],
      "priority": "P0",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-一键退回按钮在状态=审批通过且当前用户=超管时显示-005",
      "title": "一键退回按钮在状态=审批通过且当前用户=超管时显示 - 验证一键退回操作后的数据完整性",
      "preconditions": [
        "系统已登录集团超管账户",
        "存在状态为'审批通过'且包含历史审批意见的业务单据"
      ],
      "steps": [
        "执行一键退回操作",
        "确认操作成功执行",
        "检查业务单据数据和审批历史记录"
      ],
      "expected_results": [
        "业务单据状态正确变更为'已退回'",
        "历史审批意见被正确清空",
        "退回操作记录被正确保存到操作日志",
        "业务核心数据保持完整未被破坏"
      ],
      "priority": "P0",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-一键退回按钮在状态=审批通过且当前用户=超管时显示-006",
      "title": "一键退回按钮在状态=审批通过且当前用户=超管时显示 - 验证一键退回按钮在不同浏览器的兼容性",
      "preconditions": [
        "系统已登录集团超管账户",
        "存在状态为'审批通过'的业务单据",
        "准备Chrome、Firefox、Safari、Edge浏览器环境"
      ],
      "steps": [
        "在不同浏览器中登录系统",
        "导航至审批通过状态的业务单据详情页面",
        "检查一键退回按钮的显示和功能"
      ],
      "expected_results": [
        "在所有浏览器中一键退回按钮正常显示",
        "按钮样式和位置保持一致",
        "点击功能在所有浏览器中正常工作",
        "无界面错位或显示异常"
      ],
      "priority": "P3",
      "category": "兼容性测试",
      "description": ""
    },
    {
      "id": "TC-一键退回按钮在状态=审批通过且当前用户=超管时显示-007",
      "title": "一键退回按钮在状态=审批通过且当前用户=超管时显示 - 验证一键退回操作的性能响应时间",
      "preconditions": [
        "系统已登录集团超管账户",
        "存在状态为'审批通过'的业务单据",
        "性能监控工具准备就绪"
      ],
      "steps": [
        "执行一键退回操作",
        "记录从点击到操作完成的响应时间",
        "重复测试多次取平均值"
      ],
      "expected_results": [
        "操作响应时间小于2秒",
        "系统资源使用在正常范围内",
        "无内存泄漏或性能下降现象",
        "高并发场景下操作仍能正常完成"
      ],
      "priority": "P2",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-一键退回按钮在状态=审批通过且当前用户=超管时显示-008",
      "title": "一键退回按钮在状态=审批通过且当前用户=超管时显示 - 验证一键退回操作的用户确认机制",
      "preconditions": [
        "系统已登录集团超管账户",
        "存在状态为'审批通过'的业务单据"
      ],
      "steps": [
        "点击一键退回按钮",
        "观察系统弹出的确认对话框",
        "测试确认和取消操作"
      ],
      "expected_results": [
        "点击按钮后弹出明确的确认对话框",
        "对话框包含操作风险和后果提示",
        "确认后操作正常执行",
        "取消后操作中止且状态不变"
      ],
      "priority": "P1",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-退回时必须填写退回原因并清空历史审批意见-001",
      "title": "退回时必须填写退回原因并清空历史审批意见 - 验证集团超管执行退回操作时填写退回原因并清空历史审批意见",
      "preconditions": [
        "系统中有已审批通过的业务单据",
        "当前登录用户为集团超管权限",
        "单据处于可退回状态"
      ],
      "steps": [
        "登录系统并导航到目标业务单据详情页面",
        "点击一键退回按钮",
        "在弹出的退回原因对话框中输入退回原因",
        "确认执行退回操作",
        "查看单据状态和历史审批记录"
      ],
      "expected_results": [
        "退回操作成功执行",
        "单据状态正确变更为待重新提交",
        "历史审批意见被清空",
        "退回原因被正确记录在操作日志中"
      ],
      "priority": "P0",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-退回时必须填写退回原因并清空历史审批意见-002",
      "title": "退回时必须填写退回原因并清空历史审批意见 - 验证非集团超管用户无法执行退回操作",
      "preconditions": [
        "系统中有已审批通过的业务单据",
        "当前登录用户为普通用户权限",
        "单据处于可退回状态"
      ],
      "steps": [
        "使用普通用户账号登录系统",
        "导航到目标业务单据详情页面",
        "检查页面是否显示一键退回按钮"
      ],
      "expected_results": [
        "页面不显示一键退回按钮",
        "用户无法通过任何方式执行退回操作",
        "系统返回权限不足的错误提示"
      ],
      "priority": "P0",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-退回时必须填写退回原因并清空历史审批意见-003",
      "title": "退回时必须填写退回原因并清空历史审批意见 - 验证退回操作后数据完整性保持",
      "preconditions": [
        "系统中有已审批通过的业务单据",
        "单据包含多条历史审批意见",
        "当前登录用户为集团超管权限"
      ],
      "steps": [
        "执行退回操作并填写退回原因",
        "检查数据库中的审批意见表",
        "验证单据基本信息未被修改",
        "检查操作日志记录"
      ],
      "expected_results": [
        "历史审批意见表相关记录被正确清空",
        "单据基本信息保持完整未被修改",
        "退回操作被正确记录在操作日志中",
        "数据表约束关系保持完整"
      ],
      "priority": "P0",
      "category": "数据完整性测试",
      "description": ""
    },
    {
      "id": "TC-退回时必须填写退回原因并清空历史审批意见-004",
      "title": "退回时必须填写退回原因并清空历史审批意见 - 验证退回后重新提交和审批流程重启",
      "preconditions": [
        "业务单据已被成功退回",
        "当前用户有权限重新提交单据"
      ],
      "steps": [
        "登录系统并导航到已退回的单据",
        "修改单据内容并重新提交",
        "验证审批流程重新启动",
        "检查新的审批记录"
      ],
      "expected_results": [
        "单据可以正常重新提交",
        "审批流程从初始状态重新开始",
        "新的审批意见独立记录，不与历史记录混淆",
        "退回原因在重新提交后仍可查看"
      ],
      "priority": "P1",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-退回时必须填写退回原因并清空历史审批意见-005",
      "title": "退回时必须填写退回原因并清空历史审批意见 - 验证退回按钮显示条件控制",
      "preconditions": [
        "系统中有不同状态的业务单据",
        "当前登录用户为集团超管权限"
      ],
      "steps": [
        "查看审批中的单据详情页面",
        "查看已审批通过的单据详情页面",
        "查看已退回的单据详情页面",
        "查看已完成审批的单据详情页面"
      ],
      "expected_results": [
        "只在已审批通过状态的单据显示一键退回按钮",
        "其他状态的单据不显示退回按钮",
        "按钮状态和样式符合设计要求"
      ],
      "priority": "P1",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-退回时必须填写退回原因并清空历史审批意见-006",
      "title": "退回时必须填写退回原因并清空历史审批意见 - 验证退回操作性能响应时间",
      "preconditions": [
        "系统中有大量历史审批意见的单据",
        "性能测试环境已搭建完成"
      ],
      "steps": [
        "使用性能测试工具模拟执行退回操作",
        "监控服务器响应时间和资源消耗",
        "执行并发退回操作测试",
        "分析性能测试结果数据"
      ],
      "expected_results": [
        "单次退回操作响应时间小于2秒",
        "并发操作时系统性能表现稳定",
        "数据库操作效率在可接受范围内",
        "内存和CPU使用率正常"
      ],
      "priority": "P2",
      "category": "性能测试",
      "description": ""
    },
    {
      "id": "TC-退回时必须填写退回原因并清空历史审批意见-007",
      "title": "退回时必须填写退回原因并清空历史审批意见 - 验证跨浏览器兼容性",
      "preconditions": [
        "准备Chrome、Firefox、Safari、Edge浏览器环境",
        "系统中有可退回的业务单据"
      ],
      "steps": [
        "在不同浏览器中登录系统",
        "执行退回操作流程",
        "验证界面显示和功能一致性",
        "检查各浏览器下的错误提示和处理"
      ],
      "expected_results": [
        "所有浏览器中退回功能正常工作",
        "界面布局和样式保持一致",
        "弹出窗口和对话框显示正常",
        "错误处理和提示信息一致"
      ],
      "priority": "P3",
      "category": "兼容性测试",
      "description": ""
    },
    {
      "id": "TC-退回后状态变为上级驳回，填报人修改后重新提交-001",
      "title": "退回后状态变为上级驳回，填报人修改后重新提交 - 验证集团超管执行一键退回操作后状态变为上级驳回",
      "preconditions": [
        "系统存在已审批通过的表单",
        "当前用户为集团超级管理员",
        "表单处于可退回状态"
      ],
      "steps": [
        "登录系统作为集团超管",
        "导航至待处理表单列表",
        "选择已审批通过的表单",
        "点击一键退回按钮",
        "确认退回操作"
      ],
      "expected_results": [
        "表单状态从'审批通过'变为'上级驳回'",
        "历史审批意见被清空",
        "系统显示退回成功提示信息",
        "填报人收到退回通知"
      ],
      "priority": "P0",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-退回后状态变为上级驳回，填报人修改后重新提交-002",
      "title": "退回后状态变为上级驳回，填报人修改后重新提交 - 验证非集团超管用户无法执行一键退回操作",
      "preconditions": [
        "系统存在已审批通过的表单",
        "当前用户为非集团超级管理员（如普通用户或部门管理员）",
        "表单处于可退回状态"
      ],
      "steps": [
        "登录系统作为非集团超管用户",
        "导航至待处理表单列表",
        "查看已审批通过的表单详情页面"
      ],
      "expected_results": [
        "一键退回按钮不可见或处于禁用状态",
        "用户无法执行退回操作",
        "系统无权限执行操作的错误提示（如果尝试非法访问）"
      ],
      "priority": "P0",
      "category": "安全测试",
      "description": ""
    },
    {
      "id": "TC-退回后状态变为上级驳回，填报人修改后重新提交-003",
      "title": "退回后状态变为上级驳回，填报人修改后重新提交 - 验证填报人修改驳回表单后重新提交的完整流程",
      "preconditions": [
        "表单已被集团超管退回，状态为'上级驳回'",
        "当前用户为表单填报人",
        "填报人已收到退回通知"
      ],
      "steps": [
        "登录系统作为填报人",
        "查看被退回的表单",
        "根据驳回原因修改表单内容",
        "点击重新提交按钮",
        "确认提交操作"
      ],
      "expected_results": [
        "表单状态从'上级驳回'变为'待审批'",
        "修改后的表单数据正确保存",
        "审批流程重新启动",
        "相关审批人收到新的审批通知"
      ],
      "priority": "P1",
      "category": "流程测试",
      "description": ""
    },
    {
      "id": "TC-退回后状态变为上级驳回，填报人修改后重新提交-004",
      "title": "退回后状态变为上级驳回，填报人修改后重新提交 - 验证一键退回按钮在不同状态和权限下的显示条件",
      "preconditions": [
        "系统存在不同状态的表单（审批中、审批通过、已驳回等）",
        "使用不同权限用户登录系统"
      ],
      "steps": [
        "使用集团超管登录系统",
        "查看不同状态表单的详情页面",
        "使用非集团超管用户登录系统",
        "查看相同状态表单的详情页面"
      ],
      "expected_results": [
        "一键退回按钮仅在表单为审批通过状态且用户为集团超管时显示",
        "其他状态或权限下一键退回按钮隐藏或禁用",
        "界面显示符合业务规则和权限控制要求"
      ],
      "priority": "P1",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-退回后状态变为上级驳回，填报人修改后重新提交-005",
      "title": "退回后状态变为上级驳回，填报人修改后重新提交 - 验证一键退回操作在不同浏览器下的兼容性",
      "preconditions": [
        "准备Chrome、Firefox、Safari、Edge等主流浏览器",
        "系统存在已审批通过的表单",
        "当前用户为集团超级管理员"
      ],
      "steps": [
        "在不同浏览器中登录系统",
        "执行一键退回操作",
        "观察界面显示和功能执行情况"
      ],
      "expected_results": [
        "所有浏览器中一键退回功能正常工作",
        "界面显示一致，无布局错乱",
        "状态转换和数据清理功能在所有浏览器中表现一致"
      ],
      "priority": "P3",
      "category": "兼容性测试",
      "description": ""
    },
    {
      "id": "TC-退回后状态变为上级驳回，填报人修改后重新提交-006",
      "title": "退回后状态变为上级驳回，填报人修改后重新提交 - 验证一键退回操作的性能响应时间",
      "preconditions": [
        "系统存在大量已审批通过的表单",
        "性能测试环境已搭建完成",
        "JMeter测试脚本准备就绪"
      ],
      "steps": [
        "使用JMeter模拟并发一键退回操作",
        "监控系统响应时间和资源消耗",
        "记录性能指标数据"
      ],
      "expected_results": [
        "单次一键退回操作响应时间小于2秒",
        "并发操作下系统响应时间在可接受范围内",
        "系统资源消耗正常，无内存泄漏或性能下降"
      ],
      "priority": "P2",
      "category": "性能测试",
      "description": ""
    },
    {
      "id": "TC-流程从退回→上级审批中开始新一轮审批-001",
      "title": "流程从退回→上级审批中开始新一轮审批 - 验证非集团超管用户无法执行一键退回操作",
      "preconditions": [
        "系统存在已审批通过的业务流程",
        "测试用户为非集团超管权限（如普通审批员）",
        "用户已登录系统"
      ],
      "steps": [
        "导航到已审批完成的业务流程详情页面",
        "检查页面是否显示一键退回按钮",
        "尝试通过直接URL访问或API调用执行退回操作"
      ],
      "expected_results": [
        "页面不显示一键退回按钮",
        "直接操作尝试返回权限错误提示",
        "系统记录未授权访问日志"
      ],
      "priority": "P0",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-流程从退回→上级审批中开始新一轮审批-002",
      "title": "流程从退回→上级审批中开始新一轮审批 - 验证集团超管执行退回操作的数据一致性",
      "preconditions": [
        "系统存在已审批通过的业务流程",
        "测试用户为集团超管权限",
        "流程包含历史审批意见和数据"
      ],
      "steps": [
        "以集团超管身份登录系统",
        "导航到目标业务流程详情页面",
        "点击一键退回按钮并确认操作",
        "验证流程状态和数据变化"
      ],
      "expected_results": [
        "历史审批意见被正确清空",
        "流程状态变更为'上级审批中'",
        "业务数据完整性保持，无数据丢失或损坏",
        "生成正确的操作日志记录"
      ],
      "priority": "P0",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-流程从退回→上级审批中开始新一轮审批-003",
      "title": "流程从退回→上级审批中开始新一轮审批 - 验证完整业务流程从退回到重新审批",
      "preconditions": [
        "系统存在已审批通过的业务流程（状态为'审批通过'）",
        "集团超管用户已登录系统",
        "审批流程配置完整且处于可操作状态",
        "填报人用户账户存在且可接收通知"
      ],
      "steps": [
        "执行一键退回操作将流程从'审批通过'状态退回",
        "验证流程状态从'审批通过'变为'上级审批中'",
        "检查填报人是否收到退回通知，验证通知内容包含流程编号、退回原因、操作时间",
        "模拟上级审批员重新提交审批操作",
        "验证审批流程正常重启并最终完成，状态变为'审批通过'",
        "查询审计日志验证操作记录完整性"
      ],
      "expected_results": [
        "退回后流程状态正确变更为'上级审批中'",
        "填报人收到准确的退回通知，包含流程ID、退回时间、操作人信息",
        "审批流程可正常重启和执行，所有状态转换符合业务规则",
        "最终审批流程成功完成，状态变为'审批通过'",
        "审计日志记录完整的退回操作信息，包括操作人、时间、原状态、新状态"
      ],
      "priority": "P1",
      "category": "端到端测试"
    },
    {
      "id": "TC-流程从退回→上级审批中开始新一轮审批-004",
      "title": "流程从退回→上级审批中开始新一轮审批 - 验证一键退回按钮的显示条件",
      "preconditions": [
        "系统存在不同状态的业务流程（审批中、审批通过、已驳回、已撤回）",
        "用户具有不同权限级别（集团超管、普通审批员、填报人）",
        "多种业务流程类型存在且配置完整"
      ],
      "steps": [
        "使用集团超管权限用户登录系统",
        "访问处于'审批通过'状态的业务流程详情页",
        "检查一键退回按钮是否显示且可点击",
        "使用普通审批员权限用户登录系统",
        "访问同一流程详情页，验证按钮不显示",
        "使用集团超管访问'审批中'状态的流程，验证按钮不显示"
      ],
      "expected_results": [
        "按钮仅在流程为'审批通过'状态且用户为集团超管时显示",
        "按钮显示样式符合设计规范，状态为可点击",
        "其他状态（审批中、已驳回、已撤回）下按钮隐藏",
        "非集团超管权限用户访问时按钮不可见",
        "界面显示符合业务规则要求，无错误显示"
      ],
      "priority": "P1",
      "category": "功能测试"
    },
    {
      "id": "TC-流程从退回→上级审批中开始新一轮审批-005",
      "title": "流程从退回→上级审批中开始新一轮审批 - 验证一键退回操作的性能表现",
      "preconditions": [
        "系统存在1000条以上审批意见的业务流程",
        "性能测试环境已搭建，监控工具准备就绪",
        "JMeter性能测试脚本已配置完成"
      ],
      "steps": [
        "使用JMeter模拟50并发用户执行退回操作请求",
        "执行单次退回操作并记录响应时间，重复10次取平均值",
        "监控系统CPU、内存、数据库连接池使用情况",
        "分析性能数据并评估是否符合要求",
        "验证100000条审批意见时的边界性能表现"
      ],
      "expected_results": [
        "单次退回操作平均响应时间小于2秒，P95响应时间小于3秒",
        "50并发操作下系统保持稳定，错误率低于0.1%",
        "CPU使用率不超过80%，内存使用在合理范围内",
        "数据库连接池无溢出，无内存泄漏或性能退化",
        "极端数据量（10万条）下系统不崩溃，有合理的降级处理"
      ],
      "priority": "P2",
      "category": "性能测试"
    },
    {
      "id": "TC-流程从退回→上级审批中开始新一轮审批-006",
      "title": "流程从退回→上级审批中开始新一轮审批 - 验证跨浏览器兼容性的一键退回功能",
      "preconditions": [
        "准备Chrome 120+、Firefox 115+、Safari 16+、Edge 120+浏览器",
        "系统可正常访问，测试用例流程已准备",
        "多语言环境配置完成"
      ],
      "steps": [
        "在不同浏览器中登录系统",
        "切换系统语言为英文、中文简体、中文繁体",
        "执行一键退回操作流程",
        "验证界面显示和功能一致性",
        "检查各浏览器下的操作结果和错误消息显示"
      ],
      "expected_results": [
        "所有浏览器功能正常可用，操作流程一致",
        "界面显示一致无错位，多语言文本翻译准确",
        "错误消息在多语言环境下正确显示对应翻译",
        "操作结果在各浏览器下保持一致",
        "无浏览器特定的功能缺陷或显示问题"
      ],
      "priority": "P3",
      "category": "兼容性测试"
    },
    {
      "id": "TC-流程从退回→上级审批中开始新一轮审批-007",
      "title": "流程从退回→上级审批中开始新一轮审批 - 验证退回操作的权限安全控制",
      "preconditions": [
        "OWASP ZAP安全扫描工具已配置",
        "系统存在测试用业务流程，状态为审批通过",
        "普通用户、审批员、超管权限账户已准备",
        "API接口文档和测试环境准备就绪"
      ],
      "steps": [
        "使用普通用户权限调用退回API：POST /api/approval/{id}/return，Headers: {Authorization: Bearer user_token}",
        "验证API返回403权限错误",
        "使用ZAP进行权限绕过漏洞扫描，测试未授权访问",
        "验证API层的权限校验机制完整性",
        "检查审计日志是否记录未授权访问尝试"
      ],
      "expected_results": [
        "普通用户API调用返回403 Forbidden错误",
        "安全扫描未发现权限绕过漏洞，所有端点都有正确校验",
        "API请求必须包含有效的权限令牌和正确的角色权限",
        "系统记录所有未授权访问尝试，包含IP、时间、用户信息",
        "审计日志包含完整的操作记录和权限验证结果"
      ],
      "priority": "P0",
      "category": "安全测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-001",
      "title": "一键退回操作只在叶子节点展示入口 - 验证集团超管在叶子节点审批通过状态下可见一键退回按钮",
      "preconditions": [
        "用户已登录系统且为集团超管角色",
        "流程已到达叶子节点且状态为审批通过",
        "当前节点为流程的最终审批节点，无下级节点"
      ],
      "steps": [
        "登录系统并导航到审批流程页面",
        "找到处于审批通过状态的叶子节点审批记录",
        "检查该节点操作区域是否显示一键退回按钮",
        "验证非叶子节点或非审批通过状态下按钮不显示"
      ],
      "expected_results": [
        "一键退回按钮仅在叶子节点审批通过状态下正确显示",
        "按钮状态为可点击且样式符合设计规范",
        "非叶子节点或非审批通过状态下按钮隐藏",
        "界面显示逻辑符合业务规则要求"
      ],
      "priority": "P1",
      "category": "功能测试"
    },
    {
      "id": "TC-流程退回通知机制验证-008",
      "title": "流程退回通知机制验证 - 验证填报人收到准确的退回通知",
      "preconditions": [
        "系统存在审批通过的流程，填报人信息完整",
        "通知系统配置正常，邮件/SMS通道可用",
        "集团超管用户已登录系统"
      ],
      "steps": [
        "执行一键退回操作",
        "检查填报人收件箱是否收到退回通知",
        "验证通知内容包含：流程编号、退回原因、操作时间、操作人",
        "验证多语言环境下通知内容的翻译准确性",
        "检查通知记录是否写入数据库通知表"
      ],
      "expected_results": [
        "填报人准确收到退回通知",
        "通知内容完整准确，包含所有必要信息",
        "多语言环境下通知文本翻译正确",
        "通知记录正确写入数据库，状态为已发送",
        "无敏感信息泄露在通知内容中"
      ],
      "priority": "P1",
      "category": "功能测试"
    },
    {
      "id": "TC-审计日志详细内容验证-009",
      "title": "审计日志详细内容验证 - 验证退回操作的完整审计日志记录",
      "preconditions": [
        "系统审计功能已开启，日志数据库可访问",
        "存在可退回的审批流程",
        "数据库查询权限已配置"
      ],
      "steps": [
        "执行一键退回操作",
        "执行SQL查询：SELECT * FROM audit_log WHERE operation_type = 'RETURN' AND business_id = '{流程ID}' ORDER BY create_time DESC",
        "验证日志记录包含：操作人ID、操作时间、原状态、新状态、IP地址",
        "检查敏感信息如身份证号、手机号是否正确脱敏",
        "验证日志记录完整性，无缺失字段"
      ],
      "expected_results": [
        "审计日志完整记录退回操作，包含所有必需字段",
        "敏感信息正确脱敏处理（如：138****1234）",
        "操作时间戳准确，时区处理正确",
        "日志记录不可篡改，包含数字签名或哈希校验",
        "查询结果包含完整的操作流水记录"
      ],
      "priority": "P1",
      "category": "安全测试"
    },
    {
      "id": "TC-退回操作边界数据量测试-010",
      "title": "退回操作边界数据量测试 - 验证超多审批意见时的性能和行为",
      "preconditions": [
        "创建包含100000条审批意见的测试流程",
        "性能监控工具准备就绪",
        "系统资源监控配置完成"
      ],
      "steps": [
        "对包含10万条审批意见的流程执行退回操作",
        "监控操作响应时间和系统资源使用情况",
        "验证操作完成后流程状态正确变更",
        "检查数据一致性，验证所有关联数据正确处理",
        "验证系统在极端数据量下不崩溃，有合理的超时处理"
      ],
      "expected_results": [
        "系统能够处理极端数据量的退回操作",
        "操作完成后退回状态正确变更，数据完整性保持",
        "系统资源使用在可控范围内，无内存溢出",
        "有合理的超时机制和进度反馈",
        "操作日志完整记录，无数据丢失"
      ],
      "priority": "P2",
      "category": "性能测试"
    },
    {
      "id": "TC-跨日退回时间处理验证-011",
      "title": "跨日退回时间处理验证 - 验证跨日期操作的业务逻辑正确性",
      "preconditions": [
        "系统时间可调整，测试环境支持时间修改",
        "存在审批通过的流程",
        "业务日期逻辑配置完整"
      ],
      "steps": [
        "将系统时间调整为23:59:50执行退回操作",
        "验证操作时间戳和业务日期处理是否正确",
        "调整系统时间跨月、跨年边界执行操作",
        "验证审计日志中的时间记录准确性",
        "检查业务报表和统计中的日期归类正确性"
      ],
      "expected_results": [
        "跨日操作时间戳处理正确，时区转换准确",
        "业务日期逻辑正确处理，归入正确的统计周期",
        "审计日志记录的操作时间准确无误",
        "无日期计算错误或时区处理问题",
        "所有时间相关业务逻辑保持一致性"
      ],
      "priority": "P2",
      "category": "功能测试"
    },
    {
      "id": "TC-并发退回操作冲突处理-012",
      "title": "并发退回操作冲突处理 - 验证多人同时操作同一流程的冲突处理",
      "preconditions": [
        "系统存在审批通过的流程",
        "多个集团超管账户已准备",
        "并发测试工具配置完成"
      ],
      "steps": [
        "使用两个集团超管账户同时尝试退回同一流程",
        "验证锁机制和冲突处理机制",
        "检查只有一个操作成功，另一个收到适当的冲突提示",
        "验证数据一致性，无脏数据或状态混乱",
        "检查审计日志是否正确记录冲突事件"
      ],
      "expected_results": [
        "系统正确处理并发冲突，只有一个操作成功",
        "失败操作收到明确的冲突错误提示",
        "数据保持一致性，无状态混乱或数据损坏",
        "审计日志记录所有尝试操作和最终结果",
        "锁机制有效，防止数据竞争条件"
      ],
      "priority": "P1",
      "category": "功能测试"
    },
    {
      "id": "TC-网络异常场景退回操作-013",
      "title": "网络异常场景退回操作 - 验证网络故障下的异常处理机制",
      "preconditions": [
        "网络模拟工具准备就绪（如TC、Clumsy）",
        "系统存在可退回的流程",
        "事务管理配置完整"
      ],
      "steps": [
        "模拟网络中断执行退回操作",
        "验证操作超时处理和错误提示",
        "模拟网络延迟和丢包场景执行操作",
        "检查事务回滚机制，验证数据一致性",
        "验证系统在网络异常后的恢复能力"
      ],
      "expected_results": [
        "网络中断时操作正确超时，返回适当的错误信息",
        "事务回滚机制有效，无部分提交的数据",
        "数据保持一致性，无中间状态残留",
        "系统在网络恢复后可正常继续操作",
        "错误日志记录完整的异常信息和处理过程"
      ],
      "priority": "P2",
      "category": "可靠性测试"
    },
    {
      "id": "TC-数据库异常场景处理-014",
      "title": "数据库异常场景处理 - 验证数据库故障时的系统行为",
      "preconditions": [
        "数据库监控和管理工具准备就绪",
        "测试环境支持数据库故障模拟",
        "系统存在可退回的流程"
      ],
      "steps": [
        "模拟数据库连接失败执行退回操作",
        "验证错误处理和系统稳定性",
        "模拟数据库死锁场景执行操作",
        "检查系统超时和重试机制",
        "验证数据库恢复后的系统行为"
      ],
      "expected_results": [
        "数据库连接失败时系统返回适当的错误信息",
        "系统保持稳定，不崩溃或出现不可用状态",
        "死锁场景下系统正确处理，有合理的超时机制",
        "错误日志记录详细的数据库异常信息",
        "数据库恢复后系统可正常继续操作"
      ],
      "priority": "P2",
      "category": "可靠性测试"
    },
    {
      "id": "TC-权限动态变更场景测试-015",
      "title": "权限动态变更场景测试 - 验证操作过程中权限被撤销的处理",
      "preconditions": [
        "系统存在审批通过的流程",
        "权限管理接口可用",
        "多个管理账户已准备"
      ],
      "steps": [
        "用户A开始执行退回操作",
        "在操作过程中使用用户B撤销用户A的集团超管权限",
        "验证操作结果和系统处理",
        "检查错误提示和审计日志记录",
        "验证权限变更的实时生效性"
      ],
      "expected_results": [
        "权限变更实时生效，操作立即终止或拒绝",
        "系统返回适当的权限不足错误信息",
        "数据保持一致性，无部分完成的操作",
        "审计日志记录权限变更和操作终止事件",
        "系统安全机制有效，防止越权操作"
      ],
      "priority": "P1",
      "category": "安全测试"
    },
    {
      "id": "TC-多语言界面文本验证-016",
      "title": "多语言界面文本验证 - 验证退回功能在多语言环境下的界面一致性",
      "preconditions": [
        "系统支持多语言（中文、英文、日文等）",
        "多语言资源文件配置完整",
        "存在可退回的审批流程"
      ],
      "steps": [
        "切换系统语言为英文，执行退回操作流程",
        "验证所有界面文本、按钮标签、错误消息的英文翻译准确性",
        "切换为日文重复测试流程",
        "检查文本长度适应性和界面布局稳定性",
        "验证操作结果消息的多语言一致性"
      ],
      "expected_results": [
        "所有界面文本正确翻译，无未翻译或机器翻译痕迹",
        "文本长度适应不同语言，界面布局稳定无错位",
        "错误消息和操作结果消息多语言一致性",
        "语言切换后功能逻辑保持一致",
        "无语言相关的功能缺陷或显示问题"
      ],
      "priority": "P3",
      "category": "兼容性测试"
    },
    {
      "id": "TC-API接口完整调用验证-017",
      "title": "API接口完整调用验证 - 提供完整的退回API调用示例和验证",
      "preconditions": [
        "API测试工具准备就绪（Postman、curl等）",
        "有效的访问令牌已获取",
        "测试流程ID已知"
      ],
      "steps": [
        "构造API请求：POST /api/approval/{processId}/return",
        "设置请求头：Authorization: Bearer {token}, Content-Type: application/json",
        "设置请求体：{\"reason\": \"测试退回原因\", \"operator\": \"super_admin\"}",
        "执行API调用并验证响应",
        "检查数据库状态变更和审计日志记录"
      ],
      "expected_results": [
        "API调用返回200状态码和成功响应体",
        "数据库流程状态正确变更为'上级审批中'",
        "审计日志记录完整的API操作信息",
        "错误请求（如无效token、无效流程ID）返回适当的错误码",
        "API文档和实际行为保持一致"
      ],
      "priority": "P1",
      "category": "API测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-002",
      "title": "一键退回操作只在叶子节点展示入口 - 验证非叶子节点不显示一键退回按钮",
      "preconditions": [
        "用户已登录系统且为集团超管角色",
        "流程中存在非叶子节点的审批记录",
        "非叶子节点状态为审批通过"
      ],
      "steps": [
        "登录系统并导航到审批流程页面",
        "找到非叶子节点的审批通过记录",
        "检查该节点操作区域是否显示一键退回按钮"
      ],
      "expected_results": [
        "非叶子节点操作区域不显示一键退回按钮",
        "只有叶子节点才会显示该功能入口"
      ],
      "priority": "P1",
      "category": "功能测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-003",
      "title": "一键退回操作只在叶子节点展示入口 - 验证非集团超管用户在叶子节点无法看到一键退回按钮",
      "preconditions": [
        "用户已登录系统且为非集团超管角色（如普通用户或部门管理员）",
        "流程已到达叶子节点且状态为审批通过"
      ],
      "steps": [
        "使用非集团超管账号登录系统",
        "导航到叶子节点审批通过记录页面",
        "检查操作区域是否显示一键退回按钮"
      ],
      "expected_results": [
        "非集团超管用户无法看到一键退回按钮",
        "操作区域不显示该功能入口，确保权限控制有效"
      ],
      "priority": "P0",
      "category": "安全测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-004",
      "title": "一键退回操作只在叶子节点展示入口 - 验证非审批通过状态的叶子节点不显示一键退回按钮",
      "preconditions": [
        "用户已登录系统且为集团超管角色",
        "叶子节点处于非审批通过状态（如审批中、已驳回、已撤回等）"
      ],
      "steps": [
        "登录系统并导航到审批流程页面",
        "找到处于非审批通过状态的叶子节点记录",
        "检查操作区域是否显示一键退回按钮"
      ],
      "expected_results": [
        "非审批通过状态的叶子节点不显示一键退回按钮",
        "只有审批通过状态的叶子节点才会显示该功能"
      ],
      "priority": "P1",
      "category": "功能测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-005",
      "title": "一键退回操作只在叶子节点展示入口 - 验证一键退回操作后数据清理和流程重启功能",
      "preconditions": [
        "用户已登录系统且为集团超管角色",
        "叶子节点处于审批通过状态",
        "存在历史审批意见数据（至少包含5条审批记录）"
      ],
      "steps": [
        "点击叶子节点的一键退回按钮",
        "确认退回操作",
        "检查流程状态字段是否重置为'初始提交'状态",
        "验证历史审批意见表数据是否被正确清空",
        "执行SQL查询：SELECT COUNT(*) FROM approval_comments WHERE process_id = '当前流程ID'",
        "检查流程重启后是否生成新的流程实例ID"
      ],
      "expected_results": [
        "一键退回操作成功执行并返回成功提示",
        "历史审批意见表查询结果为0，数据完整性得到保持",
        "流程状态字段正确更新为'初始提交'",
        "生成新的流程实例ID，原流程实例标记为已退回"
      ],
      "priority": "P0",
      "category": "功能测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-006",
      "title": "一键退回操作只在叶子节点展示入口 - 验证不同浏览器下叶子节点一键退回按钮显示一致性",
      "preconditions": [
        "用户已登录系统且为集团超管角色",
        "流程已到达叶子节点且状态为审批通过",
        "准备Chrome、Firefox、Safari、Edge浏览器环境"
      ],
      "steps": [
        "在不同浏览器中登录系统",
        "导航到叶子节点审批通过记录页面",
        "检查一键退回按钮的显示位置、样式和功能一致性"
      ],
      "expected_results": [
        "在所有支持的浏览器中一键退回按钮显示一致",
        "按钮功能在所有浏览器中正常工作",
        "界面布局和样式在不同浏览器中保持一致"
      ],
      "priority": "P3",
      "category": "兼容性测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-007",
      "title": "一键退回操作只在叶子节点展示入口 - 验证移动设备上叶子节点一键退回按钮显示和操作",
      "preconditions": [
        "用户已登录系统且为集团超管角色",
        "流程已到达叶子节点且状态为审批通过",
        "使用移动设备（iOS和Android）访问系统"
      ],
      "steps": [
        "在移动设备浏览器中登录系统",
        "导航到叶子节点审批通过记录页面",
        "检查一键退回按钮的显示和可操作性",
        "执行一键退回操作并验证功能"
      ],
      "expected_results": [
        "移动设备上按钮显示正确且易于操作",
        "触摸操作响应正常，无点击区域过小问题",
        "移动端界面布局合理，功能完整"
      ],
      "priority": "P3",
      "category": "兼容性测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-008",
      "title": "一键退回操作通知机制验证 - 验证填报人收到退回通知及内容准确性",
      "preconditions": [
        "用户已登录系统且为集团超管角色",
        "流程已到达叶子节点且状态为审批通过",
        "填报人用户账号已配置正确的通知接收方式"
      ],
      "steps": [
        "执行一键退回操作",
        "检查填报人的消息中心或邮箱",
        "验证通知内容包含流程名称、退回原因、退回时间等信息",
        "确认通知链接可正确跳转到对应流程页面"
      ],
      "expected_results": [
        "填报人收到退回操作通知",
        "通知内容准确完整，包含所有必要信息",
        "通知链接可正常跳转",
        "通知时间戳与操作时间一致"
      ],
      "priority": "P1",
      "category": "功能测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-009",
      "title": "一键退回操作多语言环境验证 - 验证界面文本和错误消息翻译准确性",
      "preconditions": [
        "用户已登录系统且为集团超管角色",
        "系统语言设置为英文或其他支持的语言",
        "流程已到达叶子节点且状态为审批通过"
      ],
      "steps": [
        "切换系统语言到英文环境",
        "导航到叶子节点审批通过记录页面",
        "检查一键退回按钮文本翻译准确性",
        "执行退回操作并验证成功/错误消息的翻译",
        "检查确认对话框文本的翻译准确性"
      ],
      "expected_results": [
        "所有界面文本正确翻译为目标语言",
        "错误消息和成功提示翻译准确",
        "多语言环境下功能正常可用",
        "翻译文本无截断或格式问题"
      ],
      "priority": "P2",
      "category": "国际化测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-010",
      "title": "一键退回操作审计日志验证 - 验证日志字段完整性和敏感信息脱敏",
      "preconditions": [
        "用户已登录系统且为集团超管角色",
        "流程已到达叶子节点且状态为审批通过",
        "审计日志功能已启用"
      ],
      "steps": [
        "执行一键退回操作",
        "查询审计日志表：SELECT * FROM audit_log WHERE operation_type = 'RETURN' AND process_id = '当前流程ID'",
        "验证日志记录包含操作人、操作时间、操作类型、流程ID、节点信息等字段",
        "检查敏感信息如用户密码、身份证号等是否已脱敏处理"
      ],
      "expected_results": [
        "审计日志正确记录退回操作",
        "所有必需字段完整且准确",
        "敏感信息已正确脱敏处理",
        "操作时间戳与系统时间一致"
      ],
      "priority": "P1",
      "category": "安全测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-011",
      "title": "一键退回操作性能测试 - 大量审批意见数据下的性能验证",
      "preconditions": [
        "用户已登录系统且为集团超管角色",
        "流程已到达叶子节点且状态为审批通过",
        "流程包含1000条以上审批意见数据"
      ],
      "steps": [
        "记录操作前系统时间戳",
        "执行一键退回操作",
        "记录操作完成时间戳",
        "计算操作耗时",
        "验证数据清理和流程重启的完整性"
      ],
      "expected_results": [
        "退回操作在30秒内完成",
        "所有审批意见数据正确清理",
        "流程状态正确重置",
        "系统资源使用在正常范围内"
      ],
      "priority": "P2",
      "category": "性能测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-012",
      "title": "一键退回操作API测试 - 验证API接口功能和参数正确性",
      "preconditions": [
        "用户已获取有效的API访问令牌",
        "流程已到达叶子节点且状态为审批通过"
      ],
      "steps": [
        "构造API请求：POST /api/process/return",
        "设置请求头：Authorization: Bearer {token}, Content-Type: application/json",
        "设置请求体：{\"processId\": \"流程ID\", \"nodeId\": \"叶子节点ID\", \"reason\": \"测试退回原因\"}",
        "发送API请求并验证响应",
        "检查数据库状态变化"
      ],
      "expected_results": [
        "API返回200状态码和成功响应",
        "响应体包含操作结果和新的流程实例ID",
        "数据库状态正确更新",
        "错误参数返回适当的错误码和消息"
      ],
      "priority": "P1",
      "category": "API测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-013",
      "title": "一键退回操作边界测试 - 超大量审批意见数据验证",
      "preconditions": [
        "用户已登录系统且为集团超管角色",
        "流程已到达叶子节点且状态为审批通过",
        "流程包含100000条审批意见数据"
      ],
      "steps": [
        "监控系统内存和CPU使用情况",
        "执行一键退回操作",
        "记录操作耗时和资源消耗",
        "验证数据清理的完整性",
        "检查是否有内存溢出或超时错误"
      ],
      "expected_results": [
        "系统能够处理超大量数据而不崩溃",
        "操作在合理时间内完成或提供进度提示",
        "所有数据正确清理，无数据残留",
        "系统稳定性不受影响"
      ],
      "priority": "P2",
      "category": "性能测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-014",
      "title": "一键退回操作时间边界测试 - 跨日退回操作验证",
      "preconditions": [
        "用户已登录系统且为集团超管角色",
        "流程已到达叶子节点且状态为审批通过",
        "系统时间接近日期变更边界（如23:59:50）"
      ],
      "steps": [
        "在日期变更前后执行一键退回操作",
        "验证操作时间戳和业务日期的正确性",
        "检查审计日志中的时间记录",
        "验证通知中的时间信息准确性"
      ],
      "expected_results": [
        "跨日操作时间戳处理正确",
        "业务日期逻辑正确，无日期计算错误",
        "所有时间相关记录保持一致",
        "无时区处理问题"
      ],
      "priority": "P2",
      "category": "功能测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-015",
      "title": "一键退回操作并发测试 - 多人同时操作同一流程验证",
      "preconditions": [
        "多个集团超管用户已登录系统",
        "流程已到达叶子节点且状态为审批通过"
      ],
      "steps": [
        "多个用户同时尝试执行一键退回操作",
        "观察系统并发处理行为",
        "验证只有一个操作成功执行",
        "检查其他用户的错误提示信息"
      ],
      "expected_results": [
        "系统正确处理并发冲突",
        "只有一个用户的退回操作成功执行",
        "其他用户收到适当的并发冲突提示",
        "数据一致性得到保持，无数据损坏"
      ],
      "priority": "P1",
      "category": "并发测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-016",
      "title": "一键退回操作网络异常测试 - 网络中断场景验证",
      "preconditions": [
        "用户已登录系统且为集团超管角色",
        "流程已到达叶子节点且状态为审批通过",
        "网络模拟工具已配置"
      ],
      "steps": [
        "在执行退回操作过程中模拟网络中断",
        "验证操作的事务回滚机制",
        "检查数据库状态一致性",
        "验证用户收到的错误提示信息"
      ],
      "expected_results": [
        "网络中断时操作正确回滚",
        "数据库状态保持一致性，无部分更新",
        "用户收到适当的网络错误提示",
        "系统稳定性不受影响"
      ],
      "priority": "P2",
      "category": "异常测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-017",
      "title": "一键退回操作数据库异常测试 - 数据库连接失败场景验证",
      "preconditions": [
        "用户已登录系统且为集团超管角色",
        "流程已到达叶子节点且状态为审批通过",
        "数据库监控工具已就绪"
      ],
      "steps": [
        "模拟数据库连接失败场景",
        "尝试执行一键退回操作",
        "验证系统的错误处理机制",
        "检查用户界面反馈和日志记录"
      ],
      "expected_results": [
        "系统正确处理数据库异常",
        "用户收到适当的数据库错误提示",
        "操作失败且数据保持一致性",
        "错误日志正确记录异常信息"
      ],
      "priority": "P2",
      "category": "异常测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-018",
      "title": "一键退回操作权限动态变更测试 - 操作过程中权限撤销验证",
      "preconditions": [
        "用户已登录系统且为集团超管角色",
        "流程已到达叶子节点且状态为审批通过",
        "权限管理系统已就绪"
      ],
      "steps": [
        "开始执行一键退回操作",
        "在操作过程中撤销用户的集团超管权限",
        "完成操作并验证结果",
        "检查权限校验机制的有效性"
      ],
      "expected_results": [
        "系统在操作过程中正确校验权限",
        "权限被撤销时操作被中止或回滚",
        "用户收到权限不足的错误提示",
        "数据完整性得到保持"
      ],
      "priority": "P1",
      "category": "安全测试"
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-008",
      "title": "一键退回操作只在叶子节点展示入口 - 验证一键退回操作的性能响应时间",
      "preconditions": [
        "用户已登录系统且为集团超管角色",
        "流程已到达叶子节点且状态为审批通过",
        "系统处于正常负载状态"
      ],
      "steps": [
        "记录点击一键退回按钮前的时间戳",
        "执行一键退回操作",
        "记录操作完成后的时间戳",
        "计算操作响应时间"
      ],
      "expected_results": [
        "一键退回操作响应时间在3秒以内",
        "操作过程中系统响应流畅，无卡顿现象",
        "后台数据处理效率符合性能要求"
      ],
      "priority": "P2",
      "category": "性能测试",
      "description": ""
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-009",
      "title": "一键退回操作只在叶子节点展示入口 - 验证一键退回操作的用户确认机制和错误提示",
      "preconditions": [
        "用户已登录系统且为集团超管角色",
        "流程已到达叶子节点且状态为审批通过"
      ],
      "steps": [
        "点击一键退回按钮",
        "观察是否弹出确认对话框",
        "在确认对话框中点击取消按钮",
        "再次点击一键退回按钮并确认操作",
        "模拟操作失败场景（如网络中断）"
      ],
      "expected_results": [
        "点击按钮后弹出明确的确认对话框",
        "取消操作后流程状态保持不变",
        "确认操作后正确执行退回功能",
        "操作失败时显示清晰的错误提示信息"
      ],
      "priority": "P1",
      "category": "可用性测试",
      "description": ""
    },
    {
      "id": "TC-一键退回操作只在叶子节点展示入口-010",
      "title": "一键退回操作只在叶子节点展示入口 - 验证权限绕过漏洞-直接API调用尝试执行退回操作",
      "preconditions": [
        "非集团超管用户已登录系统",
        "获取到一键退回操作的API端点",
        "准备Postman工具进行API测试"
      ],
      "steps": [
        "使用非集团超管用户的token",
        "通过Postman直接调用一键退回API",
        "尝试对叶子节点执行退回操作",
        "检查API响应结果"
      ],
      "expected_results": [
        "API返回权限不足的错误码（如403 Forbidden）",
        "操作未实际执行，数据保持原状",
        "系统记录非法操作尝试日志",
        "确保前端和后端权限验证的一致性"
      ],
      "priority": "P0",
      "category": "安全测试",
      "description": ""
    },
    {
      "id": "TC-权限控制：确保只有集团超管用户才能看到和操作一键退回功能-001",
      "title": "权限控制：确保只有集团超管用户才能看到和操作一键退回功能 - 验证集团超管用户可以看到和操作一键退回功能",
      "preconditions": [
        "系统已部署并正常运行",
        "存在一个集团超管用户账号",
        "存在至少一个处于审批通过状态的流程实例"
      ],
      "steps": [
        "使用集团超管用户账号登录系统",
        "导航到流程管理页面",
        "查看处于审批通过状态的流程实例",
        "检查页面是否显示一键退回按钮"
      ],
      "expected_results": [
        "登录成功",
        "成功访问流程管理页面",
        "能够看到处于审批通过状态的流程实例",
        "页面正确显示一键退回按钮"
      ],
      "priority": "P0",
      "category": "权限测试",
      "description": ""
    },
    {
      "id": "TC-权限控制：确保只有集团超管用户才能看到和操作一键退回功能-002",
      "title": "权限控制：确保只有集团超管用户才能看到和操作一键退回功能 - 验证普通用户无法看到和操作一键退回功能",
      "preconditions": [
        "系统已部署并正常运行",
        "存在一个普通用户账号（非集团超管）",
        "存在至少一个处于审批通过状态的流程实例"
      ],
      "steps": [
        "使用普通用户账号登录系统",
        "导航到流程管理页面",
        "查看处于审批通过状态的流程实例",
        "检查页面是否显示一键退回按钮"
      ],
      "expected_results": [
        "登录成功",
        "成功访问流程管理页面",
        "能够看到处于审批通过状态的流程实例",
        "页面不显示一键退回按钮"
      ],
      "priority": "P0",
      "category": "安全测试",
      "description": ""
    },
    {
      "id": "TC-权限控制：确保只有集团超管用户才能看到和操作一键退回功能-003",
      "title": "权限控制：确保只有集团超管用户才能看到和操作一键退回功能 - 验证权限绕过漏洞防护 - 直接API调用测试",
      "preconditions": [
        "系统已部署并正常运行",
        "存在一个普通用户账号",
        "存在至少一个处于审批通过状态的流程实例",
        "已知一键退回功能的API端点"
      ],
      "steps": [
        "使用普通用户账号获取有效的认证token",
        "使用Postman工具构造一键退回API请求",
        "使用普通用户的token调用一键退回API",
        "检查API响应结果"
      ],
      "expected_results": [
        "API调用返回权限不足的错误码（如403）",
        "操作执行失败",
        "流程状态未发生改变",
        "系统记录安全审计日志"
      ],
      "priority": "P0",
      "category": "安全测试",
      "description": ""
    },
    {
      "id": "TC-权限控制：确保只有集团超管用户才能看到和操作一键退回功能-004",
      "title": "权限控制：确保只有集团超管用户才能看到和操作一键退回功能 - 验证一键退回操作的数据一致性",
      "preconditions": [
        "系统已部署并正常运行",
        "存在一个集团超管用户账号",
        "存在一个处于审批通过状态的流程实例且有历史审批意见"
      ],
      "steps": [
        "使用集团超管用户账号登录系统",
        "执行一键退回操作",
        "验证流程状态变化",
        "检查历史审批意见是否被正确清空",
        "验证相关数据表的数据完整性"
      ],
      "expected_results": [
        "退回操作执行成功",
        "流程状态正确变更为待提交状态",
        "历史审批意见被完全清空",
        "所有相关数据表保持数据完整性，无数据损坏",
        "系统生成相应的操作日志"
      ],
      "priority": "P0",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-权限控制：确保只有集团超管用户才能看到和操作一键退回功能-005",
      "title": "权限控制：确保只有集团超管用户才能看到和操作一键退回功能 - 验证一键退回后的完整业务流程重启",
      "preconditions": [
        "系统已部署并正常运行",
        "存在一个集团超管用户账号",
        "存在一个处于审批通过状态的流程实例"
      ],
      "steps": [
        "使用集团超管用户执行一键退回操作",
        "验证流程退回成功",
        "使用原提交用户重新提交流程",
        "验证审批流程正常重启",
        "完成完整的审批流程"
      ],
      "expected_results": [
        "退回操作成功执行",
        "流程状态正确变为待提交",
        "重新提交操作成功",
        "审批流程正常重启并完成",
        "所有状态转换和数据变更正确"
      ],
      "priority": "P1",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-权限控制：确保只有集团超管用户才能看到和操作一键退回功能-006",
      "title": "权限控制：确保只有集团超管用户才能看到和操作一键退回功能 - 验证一键退回按钮的显示条件 - 状态和权限双重验证",
      "preconditions": [
        "系统已部署并正常运行",
        "存在集团超管用户和普通用户账号",
        "存在不同状态的流程实例（审批中、审批通过、已退回等）"
      ],
      "steps": [
        "使用集团超管用户登录",
        "查看不同状态的流程实例",
        "记录一键退回按钮的显示情况",
        "使用普通用户登录重复上述步骤",
        "对比两种用户的显示差异"
      ],
      "expected_results": [
        "集团超管用户只在审批通过状态的流程实例看到退回按钮",
        "普通用户在所有状态下都不显示退回按钮",
        "按钮显示逻辑符合业务规则"
      ],
      "priority": "P1",
      "category": "功能测试",
      "description": ""
    },
    {
      "id": "TC-权限控制：确保只有集团超管用户才能看到和操作一键退回功能-007",
      "title": "权限控制：确保只有集团超管用户才能看到和操作一键退回功能 - 验证一键退回操作的性能表现",
      "preconditions": [
        "系统已部署并正常运行",
        "存在集团超管用户账号",
        "存在多个处于审批通过状态的流程实例",
        "JMeter性能测试工具已配置"
      ],
      "steps": [
        "使用JMeter模拟多个并发的一键退回操作",
        "监控系统响应时间和资源使用情况",
        "执行压力测试，逐步增加并发用户数",
        "分析性能测试结果"
      ],
      "expected_results": [
        "单次操作响应时间在2秒以内",
        "在预期并发用户数下系统稳定运行",
        "无内存泄漏或性能下降",
        "错误率低于1%"
      ],
      "priority": "P2",
      "category": "性能测试",
      "description": ""
    },
    {
      "id": "TC-权限控制：确保只有集团超管用户才能看到和操作一键退回功能-008",
      "title": "权限控制：确保只有集团超管用户才能看到和操作一键退回功能 - 验证一键退回功能在不同浏览器上的兼容性",
      "preconditions": [
        "系统已部署并正常运行",
        "存在集团超管用户账号",
        "准备Chrome、Firefox、Safari、Edge等主流浏览器",
        "存在处于审批通过状态的流程实例"
      ],
      "steps": [
        "在不同浏览器中使用集团超管用户登录",
        "执行一键退回操作",
        "验证操作成功和界面显示一致性",
        "检查各浏览器下的功能行为"
      ],
      "expected_results": [
        "在所有主流浏览器中功能正常工作",
        "界面显示一致，无布局错乱",
        "操作流程和结果一致",
        "无浏览器特定的兼容性问题"
      ],
      "priority": "P3",
      "category": "兼容性测试",
      "description": ""
    },
    {
      "id": "TC-权限控制：确保只有集团超管用户才能看到和操作一键退回功能-009",
      "title": "权限控制：确保只有集团超管用户才能看到和操作一键退回功能 - 验证一键退回操作的确认机制和错误提示",
      "preconditions": [
        "系统已部署并正常运行",
        "存在集团超管用户账号",
        "存在处于审批通过状态的流程实例"
      ],
      "steps": [
        "点击一键退回按钮",
        "验证是否弹出确认对话框",
        "取消操作，验证流程状态不变",
        "确认操作，验证执行结果",
        "模拟操作失败场景，检查错误提示"
      ],
      "expected_results": [
        "操作前有明确的确认提示",
        "取消操作后流程状态保持不变",
        "确认操作后正确执行退回",
        "错误场景下有清晰易懂的错误提示信息",
        "用户界面友好，操作流程直观"
      ],
      "priority": "P1",
      "category": "可用性测试",
      "description": ""
    },
    {
      "id": "TC-数据一致性：退回操作需清空历史审批意见并保持数据完整性-001",
      "title": "数据一致性：退回操作需清空历史审批意见并保持数据完整性 - 数据一致性验证：集团超管执行退回操作后历史审批意见正确清空",
      "preconditions": [
        "系统存在已审批通过的业务流程实例",
        "当前用户为集团超级管理员权限",
        "业务流程包含多条历史审批意见记录"
      ],
      "steps": [
        "登录系统并使用集团超管账户",
        "导航至已审批通过的业务流程详情页面",
        "执行一键退回操作",
        "确认退回操作成功执行",
        "查询数据库中的历史审批意见表"
      ],
      "expected_results": [
        "退回操作执行成功，流程状态正确回退",
        "数据库历史审批意见表中相关记录被正确清空",
        "业务流程主数据保持完整，无数据丢失或损坏"
      ],
      "priority": "P0",
      "category": "数据完整性测试",
      "description": ""
    },
    {
      "id": "TC-数据一致性：退回操作需清空历史审批意见并保持数据完整性-002",
      "title": "数据一致性：退回操作需清空历史审批意见并保持数据完整性 - 权限控制验证：非集团超管用户无法执行退回操作",
      "preconditions": [
        "系统存在已审批通过的业务流程实例",
        "当前用户为非集团超级管理员权限（普通用户或审批员）"
      ],
      "steps": [
        "使用非集团超管账户登录系统",
        "导航至已审批通过的业务流程详情页面",
        "检查页面是否显示一键退回按钮",
        "尝试通过API直接调用退回操作接口"
      ],
      "expected_results": [
        "页面不显示一键退回操作按钮",
        "API调用返回权限不足错误（403 Forbidden）",
        "数据库中的历史审批意见记录保持不变"
      ],
      "priority": "P0",
      "category": "数据完整性测试",
      "description": ""
    },
    {
      "id": "TC-数据一致性：退回操作需清空历史审批意见并保持数据完整性-003",
      "title": "数据一致性：退回操作需清空历史审批意见并保持数据完整性 - 数据库事务完整性测试：退回操作过程中的异常处理",
      "preconditions": [
        "系统存在已审批通过的业务流程实例",
        "当前用户为集团超级管理员权限",
        "数据库连接正常"
      ],
      "steps": [
        "在执行退回操作过程中模拟数据库连接中断",
        "观察系统异常处理机制",
        "检查数据库中的数据一致性状态"
      ],
      "expected_results": [
        "系统正确处理数据库异常，事务回滚",
        "历史审批意见数据保持原状，未被部分清空",
        "业务流程状态保持不变，数据完整性得到保障"
      ],
      "priority": "P0",
      "category": "数据库测试",
      "description": ""
    },
    {
      "id": "TC-数据一致性：退回操作需清空历史审批意见并保持数据完整性-004",
      "title": "数据一致性：退回操作需清空历史审批意见并保持数据完整性 - 完整业务流程测试：退回后重新提交和审批流程验证",
      "preconditions": [
        "系统存在已审批通过的业务流程实例",
        "当前用户为集团超级管理员权限",
        "业务流程包含完整的历史审批记录"
      ],
      "steps": [
        "执行一键退回操作将流程退回至初始状态",
        "验证历史审批意见已清空",
        "重新提交业务流程进行审批",
        "完成新一轮的审批流程"
      ],
      "expected_results": [
        "退回操作成功清空历史审批意见",
        "重新提交后流程正常流转，无数据冲突",
        "新一轮审批意见正确记录，与历史数据完全隔离"
      ],
      "priority": "P1",
      "category": "数据完整性测试",
      "description": ""
    },
    {
      "id": "TC-数据一致性：退回操作需清空历史审批意见并保持数据完整性-005",
      "title": "数据一致性：退回操作需清空历史审批意见并保持数据完整性 - 数据库外键约束验证：退回操作不影响关联数据完整性",
      "preconditions": [
        "系统存在已审批通过的业务流程实例",
        "业务流程数据与其他表存在外键关联关系",
        "当前用户为集团超级管理员权限"
      ],
      "steps": [
        "执行一键退回操作",
        "检查数据库中外键约束是否得到维护",
        "验证关联数据表的完整性"
      ],
      "expected_results": [
        "退回操作不破坏数据库外键约束",
        "所有关联数据保持完整性和一致性",
        "无孤儿记录或数据引用错误产生"
      ],
      "priority": "P0",
      "category": "数据库测试",
      "description": ""
    },
    {
      "id": "TC-界面响应：一键退回操作的界面响应时间应在合理范围内-001",
      "title": "界面响应：一键退回操作的界面响应时间应在合理范围内 - 验证集团超管执行一键退回操作的响应时间性能",
      "preconditions": [
        "系统处于审批通过状态",
        "当前登录用户为集团超管权限",
        "一键退回按钮可见且可点击",
        "网络环境稳定"
      ],
      "steps": [
        "使用JMeter模拟集团超管用户登录系统",
        "导航至审批通过的项目详情页面",
        "记录开始时间戳",
        "点击一键退回按钮",
        "等待操作完成并记录结束时间戳",
        "计算响应时间（结束时间-开始时间）"
      ],
      "expected_results": [
        "一键退回操作成功执行",
        "响应时间小于等于2秒（符合性能要求）",
        "系统返回操作成功提示",
        "项目状态正确变更为已退回"
      ],
      "priority": "P2",
      "category": "性能测试",
      "description": ""
    },
    {
      "id": "TC-界面响应：一键退回操作的界面响应时间应在合理范围内-002",
      "title": "性能测试：高并发下集团超管一键退回操作的响应时间稳定性验证",
      "preconditions": [
        "系统部署在测试环境",
        "准备100个审批通过的项目实例，每个实例包含100-200条审批意见",
        "JMeter配置完成并发测试脚本，模拟50个并发用户（集团超管权限）",
        "APM监控工具准备就绪，监控CPU、内存、数据库连接池等关键指标"
      ],
      "steps": [
        "使用JMeter配置50个并发用户，每个用户执行一键退回操作",
        "同时触发所有并发请求执行一键退回操作",
        "实时监控系统响应时间、吞吐量和资源使用情况",
        "收集所有请求的响应时间数据，包括最小、最大、平均响应时间",
        "分析95%和99%分位的响应时间数据",
        "检查系统日志中是否有错误或异常记录"
      ],
      "expected_results": [
        "所有并发请求均成功处理，HTTP状态码为200",
        "平均响应时间小于等于3秒",
        "95%请求的响应时间小于等于4秒，99%请求的响应时间小于等于5秒",
        "系统资源使用率正常（CPU<80%，内存<85%）",
        "错误率低于0.5%，无系统崩溃或严重性能下降",
        "数据库连接池无溢出，最大连接数不超过配置的90%"
      ],
      "priority": "P1",
      "category": "性能测试"
    },
    {
      "id": "TC-界面响应：一键退回操作的界面响应时间应在合理范围内-003",
      "title": "用户体验测试：一键退回操作界面响应流畅性和反馈机制验证",
      "preconditions": [
        "系统处于审批通过状态（状态码：APPROVED）",
        "集团超管用户已登录系统",
        "浏览器开发者工具已打开，网络面板启用",
        "网络节流设置为常规4G速度（20Mbps下行，10Mbps上行，100ms延迟）"
      ],
      "steps": [
        "在项目详情页面点击一键退回按钮",
        "观察界面加载动画显示和消失时机",
        "监控页面重绘和回流时间使用Performance API",
        "记录从点击到界面完全响应（按钮状态恢复）的总时间",
        "验证操作过程中显示的提示信息内容和时机",
        "检查操作完成后页面状态更新和提示信息"
      ],
      "expected_results": [
        "点击按钮后500ms内显示加载状态提示（旋转图标+'处理中'文字）",
        "界面响应流畅，FPS保持在50-60，无卡顿或闪烁现象",
        "总响应时间小于3秒，用户感知良好",
        "操作完成后显示明确的成功提示（'退回操作成功'）",
        "错误情况下提供清晰的错误提示，包含错误代码和建议操作"
      ],
      "priority": "P2",
      "category": "用户体验测试"
    },
    {
      "id": "TC-通知机制-001",
      "title": "通知机制测试：一键退回操作后填报人通知发送和内容准确性验证",
      "preconditions": [
        "系统部署在测试环境",
        "创建测试项目，填报人为test_user@example.com",
        "配置邮件和站内信通知服务",
        "审批流程处于已批准状态（状态码：APPROVED）"
      ],
      "steps": [
        "以集团超管身份执行一键退回操作",
        "检查邮件服务器日志，确认通知邮件已发送",
        "验证邮件收件人为填报人邮箱地址",
        "检查邮件内容包含项目名称、退回原因、操作时间等信息",
        "登录填报人账户检查站内信通知",
        "验证通知内容准确性和完整性"
      ],
      "expected_results": [
        "退回操作完成后5分钟内发送通知邮件",
        "邮件收件人地址准确为填报人注册邮箱",
        "邮件主题包含'项目退回通知'和项目名称",
        "邮件正文包含完整的退回信息：项目名称、退回时间、操作人、退回原因",
        "填报人站内信收到相同内容的通知",
        "通知链接可正确跳转到项目详情页面"
      ],
      "priority": "P1",
      "category": "功能测试"
    },
    {
      "id": "TC-国际化-001",
      "title": "国际化测试：多语言环境下退回操作界面文本和错误消息翻译验证",
      "preconditions": [
        "系统支持中英文语言环境",
        "浏览器语言设置为英语（en-US）",
        "用户偏好语言设置为英语",
        "审批流程处于可退回状态（状态码：APPROVED）"
      ],
      "steps": [
        "登录系统并切换到英语界面",
        "执行一键退回操作",
        "验证界面按钮文字、提示信息、成功消息的英文翻译",
        "模拟操作错误，验证错误消息的英文翻译",
        "检查通知邮件和站内信的英文内容",
        "切换回中文环境重复上述步骤"
      ],
      "expected_results": [
        "所有界面元素显示正确的英文翻译，无中文残留",
        "错误消息提供完整的英文描述和建议",
        "通知邮件和站内信内容为英文，格式正确",
        "中英文环境下功能行为一致",
        "翻译内容符合业务术语规范，无机器翻译痕迹"
      ],
      "priority": "P2",
      "category": "国际化测试"
    },
    {
      "id": "TC-审计日志-001",
      "title": "审计日志测试：一键退回操作审计日志字段完整性和敏感信息脱敏验证",
      "preconditions": [
        "启用系统审计日志功能",
        "审计日志数据库访问权限",
        "审批流程包含敏感信息（用户身份证号、手机号等）",
        "流程处于可退回状态（状态码：APPROVED）"
      ],
      "steps": [
        "执行一键退回操作",
        "查询审计日志表：SELECT * FROM audit_log WHERE operation_type = 'RETURN' ORDER BY create_time DESC LIMIT 1",
        "验证日志包含字段：操作时间、操作人ID、操作人姓名、操作类型、项目ID、IP地址",
        "检查敏感信息是否正确脱敏（身份证号显示前6后4，手机号显示前3后4）",
        "验证操作结果状态记录准确性",
        "检查日志中无明文敏感信息泄露"
      ],
      "expected_results": [
        "审计日志完整记录退回操作，包含所有必需字段",
        "操作时间准确记录到毫秒级别",
        "操作人信息完整且准确",
        "敏感信息按要求脱敏处理",
        "操作结果状态正确记录为SUCCESS或FAILURE",
        "无任何明文敏感信息存储在日志中"
      ],
      "priority": "P1",
      "category": "安全测试"
    },
    {
      "id": "TC-流程状态-001",
      "title": "流程状态测试：一键退回操作后流程状态字段变化验证",
      "preconditions": [
        "审批流程处于已批准状态（状态码：APPROVED）",
        "数据库查询权限准备就绪",
        "流程包含多个状态节点"
      ],
      "steps": [
        "记录退回前的流程状态：SELECT status, current_node, approval_result FROM workflow WHERE id = '项目ID'",
        "执行一键退回操作",
        "查询退回后的流程状态：SELECT status, current_node, approval_result, return_reason, return_time, return_operator FROM workflow WHERE id = '项目ID'",
        "验证状态字段变化：status从'APPROVED'变为'RETURNED'",
        "验证current_node重置为初始节点",
        "检查return_reason、return_time、return_operator字段正确填充"
      ],
      "expected_results": [
        "流程状态准确从APPROVED变为RETURNED",
        "当前节点重置为流程起始节点",
        "审批结果字段清空或标记为已退回",
        "退回原因、退回时间、操作人字段正确记录",
        "所有相关状态字段同步更新，无数据不一致"
      ],
      "priority": "P1",
      "category": "功能测试"
    },
    {
      "id": "TC-极端数据-001",
      "title": "边界测试：超多审批意见（10万条）时一键退回操作的性能和正确性验证",
      "preconditions": [
        "创建测试项目，包含100,000条审批意见记录",
        "审批意见表包含各种类型数据（文本、附件链接、用户提及等）",
        "系统监控工具准备就绪",
        "流程处于可退回状态（状态码：APPROVED）"
      ],
      "steps": [
        "执行一键退回操作",
        "监控操作执行时间",
        "验证所有审批意见状态正确更新",
        "检查数据库事务日志，确认无死锁或超时",
        "验证退回后流程状态正确",
        "检查系统资源使用情况"
      ],
      "expected_results": [
        "操作在300秒内完成执行",
        "所有100,000条审批意见状态正确更新",
        "无数据库死锁或事务超时错误",
        "流程状态正确变为RETURNED",
        "系统内存使用率在操作过程中不超过90%",
        "数据库响应时间保持在合理范围内"
      ],
      "priority": "P2",
      "category": "性能测试"
    },
    {
      "id": "TC-时间边界-001",
      "title": "时间边界测试：跨日退回操作时时间戳处理和业务日期逻辑验证",
      "preconditions": [
        "调整测试服务器时间至23:59:30",
        "审批流程处于可退回状态（状态码：APPROVED）",
        "业务日期逻辑依赖系统日期",
        "流程包含日期相关业务规则"
      ],
      "steps": [
        "在23:59:50执行一键退回操作",
        "验证操作完成时间（预计跨日）",
        "检查业务日期字段是否正确处理跨日情况",
        "验证时间戳记录准确性（创建时间、更新时间）",
        "检查日期相关业务规则是否正确应用",
        "验证审计日志中的时间记录准确性"
      ],
      "expected_results": [
        "操作正确处理跨日时间戳，无日期计算错误",
        "业务日期字段根据业务规则正确确定（操作时间或系统日期）",
        "所有时间戳记录准确，与时区设置一致",
        "日期相关业务规则正确应用，无边界条件错误",
        "审计日志时间记录与操作时间一致"
      ],
      "priority": "P2",
      "category": "功能测试"
    },
    {
      "id": "TC-并发冲突-001",
      "title": "并发冲突测试：多人同时操作同一流程时的锁机制和冲突处理验证",
      "preconditions": [
        "准备单个审批通过的流程实例",
        "配置两个不同的集团超管账户",
        "并发测试工具准备就绪",
        "流程处于可退回状态（状态码：APPROVED）"
      ],
      "steps": [
        "使用两个用户同时执行一键退回操作",
        "监控数据库锁情况和事务处理",
        "验证其中一个操作成功，另一个操作正确处理冲突",
        "检查冲突操作的错误消息和处理机制",
        "验证流程最终状态正确性",
        "检查审计日志记录两个操作尝试"
      ],
      "expected_results": [
        "系统正确处理并发冲突，只有一个操作成功执行",
        "冲突操作返回适当的错误信息（'流程正在被其他用户操作'）",
        "数据库行锁机制正常工作，无死锁发生",
        "流程最终状态正确，无中间状态或不一致",
        "审计日志记录所有操作尝试和最终结果",
        "用户收到明确的并发操作提示"
      ],
      "priority": "P1",
      "category": "并发测试"
    },
    {
      "id": "TC-网络异常-001",
      "title": "网络异常测试：网络中断情况下退回操作的异常处理和事务回滚验证",
      "preconditions": [
        "配置网络模拟工具（如TC、Clumsy）",
        "审批流程处于可退回状态（状态码：APPROVED）",
        "数据库事务日志监控启用"
      ],
      "steps": [
        "在执行退回操作过程中（点击按钮后）模拟网络中断",
        "验证操作超时处理和错误反馈",
        "检查数据库事务回滚情况",
        "验证流程状态未发生不应有的变化",
        "检查系统日志中的异常记录",
        "验证用户界面显示适当的网络错误提示"
      ],
      "expected_results": [
        "操作超时后正确终止，无挂起进程",
        "数据库事务完整回滚，无部分提交数据",
        "流程状态保持原状，未变为RETURNED",
        "系统日志记录网络超时异常和回滚操作",
        "用户界面显示'网络连接失败，请重试'提示",
        "无资源泄漏或内存溢出问题"
      ],
      "priority": "P2",
      "category": "异常测试"
    },
    {
      "id": "TC-数据库异常-001",
      "title": "数据库异常测试：数据库连接失败时退回操作的错误处理和系统稳定性验证",
      "preconditions": [
        "配置数据库模拟故障工具",
        "审批流程处于可退回状态（状态码：APPROVED）",
        "系统连接池监控启用"
      ],
      "steps": [
        "在执行退回操作前模拟数据库连接失败",
        "执行一键退回操作",
        "验证错误处理和异常反馈机制",
        "检查系统稳定性和资源释放情况",
        "验证用户界面显示适当的数据库错误提示",
        "检查系统日志中的异常记录和处理"
      ],
      "expected_results": [
        "系统正确捕获数据库连接异常",
        "操作返回明确的数据库错误信息",
        "无系统崩溃或未处理异常",
        "数据库连接池正确回收异常连接",
        "用户界面显示'系统繁忙，请稍后重试'提示",
        "系统日志详细记录数据库异常和处理过程"
      ],
      "priority": "P2",
      "category": "异常测试"
    },
    {
      "id": "TC-权限变更-001",
      "title": "权限动态测试：执行退回操作过程中用户权限被撤销时的处理机制验证",
      "preconditions": [
        "配置权限管理系统API",
        "审批流程处于可退回状态（状态码：APPROVED）",
        "准备两个管理账户（一个执行操作，一个撤销权限）"
      ],
      "steps": [
        "用户A开始执行一键退回操作",
        "在操作处理过程中，用户B撤销用户A的集团超管权限",
        "验证操作处理结果和错误处理机制",
        "检查流程状态变化和权限验证逻辑",
        "验证审计日志中的权限检查记录",
        "检查用户界面错误提示信息"
      ],
      "expected_results": [
        "系统在操作过程中实时验证用户权限",
        "权限被撤销后操作立即终止并回滚",
        "返回适当的权限错误信息（'权限不足，无法执行操作'）",
        "流程状态保持原状，未发生不应有的变化",
        "审计日志记录权限验证失败和操作终止",
        "用户界面显示清晰的权限错误提示"
      ],
      "priority": "P2",
      "category": "安全测试"
    },
    {
      "id": "TC-API测试-001",
      "title": "API测试：一键退回操作REST API接口完整性和参数验证",
      "preconditions": [
        "获取有效的API访问令牌",
        "准备审批通过的流程实例ID",
        "API测试工具（如Postman）配置完成",
        "流程处于可退回状态（状态码：APPROVED）"
      ],
      "steps": [
        "构造API请求：POST /api/v1/workflow/{projectId}/return",
        "设置请求头：Authorization: Bearer {token}, Content-Type: application/json",
        "设置请求体：{\"reason\": \"测试退回原因\", \"operator\": \"super_admin\"}",
        "执行API调用并记录响应",
        "验证HTTP状态码和响应体",
        "检查数据库状态更新和审计日志记录"
      ],
      "expected_results": [
        "API返回200状态码和成功响应：{\"code\": 200, \"message\": \"success\", \"data\": {\"operationId\": \"xxx\"}}",
        "流程状态正确更新为RETURNED",
        "审计日志完整记录API操作",
        "退回原因字段正确存储",
        "错误参数返回400状态码和详细错误信息",
        "权限验证正确，无权限返回403状态码"
      ],
      "priority": "P1",
      "category": "API测试"
    }
  ]
}